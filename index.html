<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Free Timeboxing App — Online Time Blocking & Focus Timer | Timer Machine</title>
  <meta name="description" content="Free online timeboxing app, time blocking planner, and focus timer. Build deep-work sessions, track progress, and boost productivity on web, iOS, and Android. Open source and privacy-first.">
  <meta name="robots" content="index, follow">
  <meta name="author" content="Ashish Puri">
  <meta name="theme-color" content="#667eea">
  <style>
    :root{ --bg1:#667eea; --bg2:#764ba2; --card:rgba(255,255,255,.96); --muted:#6b7280; --text:#1f2937; --radius:16px; --radius-sm:10px; --gap:12px; --btn-h:44px; --btn-pad:10px 14px; --btn-font:14px; }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{ font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; background:linear-gradient(135deg,var(--bg1) 0%,var(--bg2) 100%); color:var(--text); min-height:100vh; line-height:1.5; }
    .container{max-width:980px;margin:0 auto;padding:16px}

    /* Copy Entire Code button (fixed, top-left like canvas icon) */
    .copy-all{ position:fixed; top:10px; left:10px; z-index:2000; width:38px; height:38px; border-radius:10px; background:rgba(255,255,255,.95); border:1px solid rgba(0,0,0,.1); display:flex; align-items:center; justify-content:center; box-shadow:0 6px 16px rgba(0,0,0,.12); cursor:pointer; }
    .copy-all:active{transform:scale(.98)}
    .copy-all svg{width:20px;height:20px;stroke:#374151}

    /* Hero */
    .hero-section{text-align:center;color:#fff;margin:46px 0 20px}
    .hero-section h1{font-size:clamp(20px,4.8vw,36px);font-weight:800;margin:6px 0 8px;text-shadow:0 2px 8px rgba(0,0,0,.25)}
    .subtitle{font-size:clamp(13px,3.6vw,17px);opacity:.95}
    .hero-stats{display:flex;justify-content:center;flex-wrap:wrap;gap:8px;margin-top:10px}
    .stat-item{background:rgba(255,255,255,.15);padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.25);font-size:12px}

    /* Cards */
    .card{background:var(--card);border:1px solid rgba(0,0,0,.06);border-radius:var(--radius);padding:14px;box-shadow:0 6px 24px rgba(0,0,0,.08);margin-bottom:14px}

    /* Tabs */
    .tabs{display:flex;gap:6px;background:rgba(102,126,234,.14);border-radius:12px;padding:6px;margin-bottom:10px}
    .tab{flex:1;text-align:center;padding:8px 10px;border-radius:10px;font-weight:700;cursor:pointer;color:#1f2937;font-size:14px}
    .tab.active{background:#fff;box-shadow:0 3px 12px rgba(0,0,0,.08)}

    /* Inputs */
    .input-section{display:grid;grid-template-columns:1fr 1fr auto;gap:10px;align-items:end}
    @media(max-width:640px){
      .input-section{grid-template-columns:1fr; gap:8px}
      .input-section button{width:100%; margin-top:4px}
    }
    .input-group{display:flex;flex-direction:column;gap:6px}
    label{font-weight:700;color:#374151;font-size:13px}
    input,textarea{padding:10px 12px;border:1.5px solid #e5e7eb;border-radius:10px;font-size:14px;background:#fff;width:100%;box-sizing:border-box}
    input:focus,textarea:focus{outline:none;border-color:var(--bg1);box-shadow:0 0 0 3px rgba(102,126,234,.15)}
    .example{font-size:12px;color:#6b7280;background:#f9fafb;border:1px dashed #e5e7eb;border-radius:10px;padding:8px;margin:6px 0}

    /* Buttons */
    button{height:38px;padding:0 8px;font-size:13px;border:none;border-radius:8px;cursor:pointer;color:#fff;background:linear-gradient(135deg,var(--bg1),var(--bg2));display:inline-flex;align-items:center;justify-content:center;gap:4px;font-weight:700;box-shadow:0 4px 12px rgba(102,126,234,.28);transition:transform .12s ease}
    @media(max-width:520px){
      button{height:28px;font-size:11px;padding:0 4px}
      .task-item{grid-template-columns:28px 1fr auto auto;gap:6px;padding:8px}
      .task-name{font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:calc(100vw - 160px)}
      .task-time{font-size:10px}
      .timer-display{font-size:12px;min-width:60px}
      .task-controls .btn-danger{height:26px;padding:0 8px;font-size:11px}
      .move-btn{height:16px;padding:0 3px;font-size:9px}
    }
    button:hover{transform:translateY(-1px)}
    .btn-line{background:#eef2ff;color:#4338ca;border:1px solid #dbeafe}
    .btn-danger{background:#ef4444}
    .btn-success{background:#10b981}
    .btn-warning{background:#f59e0b}
    .btn-info{background:#3b82f6}

    /* Timer controls grid */
    .controls-grid{display:grid;gap:6px;grid-template-columns:repeat(5,minmax(0,1fr))}
    @media(max-width:520px){.controls-grid{gap:4px}}
    .time-adjustments{display:grid;gap:6px;margin-top:8px;grid-template-columns:repeat(4,minmax(0,1fr))}

    /* Task list */
    .task-list{display:flex;flex-direction:column;gap:10px}
    .task-item{display:grid;align-items:center;grid-template-columns:34px 1fr auto auto;gap:10px;padding:10px;background:#fff;border-radius:12px;border:1px solid #e5e7eb;cursor:pointer;transition:all .2s ease}
    @media(max-width:520px){
      .task-item{grid-template-columns:28px 1fr auto auto;gap:6px;padding:8px}
    }
    .task-item:hover{box-shadow:0 4px 12px rgba(0,0,0,.1)}
    .task-item.active{border-color:#10b981;background:#ecfdf5}
    .task-item.paused{border-color:#f59e0b;background:#fffbeb}
    .task-item.expanded{padding:16px;box-shadow:0 8px 24px rgba(0,0,0,.15);transform:scale(1.02);border-color:#667eea;background:#f8faff}
    .move-controls{display:flex;flex-direction:column;gap:6px}
    .move-btn{height:18px;padding:0 3px;font-size:9px;border-radius:4px;background:#9ca3af;color:#fff;border:none;cursor:pointer}
    .move-btn:disabled{opacity:.4}
    .task-info{min-width:0}
    .task-name{font-weight:800;font-size:14px;color:#111827;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;transition:all .2s ease}
    @media(max-width:520px){
      .task-name{font-size:12px;max-width:calc(100vw - 160px)}
    }
    .task-name.expanded{white-space:normal;overflow:visible;text-overflow:unset;font-size:16px;line-height:1.4;color:#667eea}
    .task-time{font-size:12px;color:var(--muted)}
    .timer-display{font-family:ui-monospace,Menlo,Consolas,monospace;font-weight:800;color:#4338ca;min-width:78px;text-align:right;font-size:14px}
    .timer-display.expanded{font-size:18px;color:#667eea}
    .task-controls{display:flex;gap:8px}
    .task-controls .btn-danger{height:32px;padding:0 10px;font-size:12px}

    /* Progress */
    .progress-bar{width:100%;height:8px;background:#eef2ff;border-radius:6px;overflow:hidden;margin:8px 0}
    .progress{height:100%;background:linear-gradient(90deg,#10b981,#16a34a)}

    /* Warning popup */
    .warning-popup{position:fixed;inset:auto 12px 12px 12px;background:#111827;color:#fff;padding:12px;border-radius:14px;display:none;z-index:1000;border:1px solid rgba(255,255,255,.1)}
    .warning-popup h3{margin:0 0 4px;font-size:15px}
    .warning-popup p{margin:0 0 8px;font-size:13px;color:#e5e7eb}
    .warning-controls{display:grid;gap:8px;grid-template-columns:repeat(4,1fr)}
    .time-input{width:100%;height:var(--btn-h);text-align:center}

    /* Content & brand */
    .content{background:var(--card);border:1px solid rgba(0,0,0,.06);border-radius:var(--radius);padding:16px}
    .content h2{font-size:20px;margin:4px 0 8px}
    .content h3{font-size:16px;margin:12px 0 6px}
    .content p{margin:8px 0;font-size:14px;color:#111827}
    .content ul{margin:6px 0 6px 18px;font-size:14px}
    .personal-brand{text-align:center;color:#fff;padding:16px;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.22);border-radius:16px}
    .social-links{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin:10px 0}
    .social-links a{color:#fff;text-decoration:none;font-size:14px;background:rgba(255,255,255,.16);padding:8px 12px;border-radius:999px}
    .donation-block{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:center;margin-top:8px}
    .donation-block img{width:144px;height:144px;object-fit:contain;background:#fff;border-radius:10px;border:1px solid rgba(0,0,0,.06);padding:6px}
    .donation-links{display:flex;flex-direction:column;gap:8px;align-items:center}
    .donate-link{background:linear-gradient(135deg,#f59e0b,#ef4444)!important;color:#fff!important;padding:10px 16px!important;border-radius:999px!important;font-weight:800!important;text-decoration:none}
    .donation-links a{background:#fff;color:#111827;border:1px solid #e5e7eb;border-radius:10px;padding:8px 12px;text-decoration:none;font-weight:700;font-size:14px}

    /*
      =========================
      MOBILE: Aggressive layout for Task Queue (≤520px)
      - Show up to 2 lines of task name (so first line always visible)
      - Prevent timer/remove from stealing horizontal space by placing them at bottom-right
      - Reduce Remove button size and timer font
      - Keep expanded view showing full name (no clamp)
      =========================
    */
    @media (max-width:520px) {
      /* compact the grid to icon + main content. right padding leaves room for absolute controls */
      .task-item{
        display:grid;
        grid-template-columns:28px 1fr;
        gap:8px;
        padding:10px 112px 12px 8px; /* big right padding ensures absolute controls won't overlap text */
        position:relative;
        align-items:start;
      }

      /* keep move-controls visible but tiny so user can still reorder without losing space */
      .move-controls{ display:flex; flex-direction:column; gap:4px; margin-right:4px; }
      .move-btn{height:18px;padding:0 4px;font-size:10px;border-radius:6px}

      /* allow two lines for task name, but clamp to avoid overflowing */
      .task-name{
        display:-webkit-box;
        -webkit-line-clamp:2; /* show two lines on mobile preview */
        -webkit-box-orient:vertical;
        overflow:hidden;
        white-space:normal;
        font-size:13px;
        line-height:1.12;
        margin-right:4px;
      }

      /* expanded: remove clamp so full name appears */
      .task-item.expanded .task-name,
      .task-name.expanded {
        -webkit-line-clamp:unset;
        display:block;
        white-space:normal;
        overflow:visible;
        font-size:15px;
        line-height:1.28;
      }

      /* smaller duration line above the absolute controls so it doesn't clash */
      .task-time{ font-size:11px; color:var(--muted); margin-top:6px; }

      /* Position timer and Remove button at bottom-right; timer to left of Remove */
      .timer-display{
        position:absolute;
        right:86px; /* sits left of Remove button */
        bottom:8px;
        font-size:12px !important;
        min-width:56px;
        text-align:center;
        font-weight:800;
        line-height:1;
        background:rgba(59,130,246,0.08); /* subtle blue bg */
        color:#1e40af;
        padding:4px 8px;
        border-radius:8px;
        border:1px solid rgba(59,130,246,0.12);
      }

      .task-controls{
        position:absolute;
        right:8px;
        bottom:8px;
        display:flex;
        gap:6px;
        align-items:center;
        z-index:2;
      }

      /* compact Remove button pill */
      .task-controls .btn-danger{
        height:26px;
        padding:0 8px;
        font-size:11px;
        border-radius:10px;
        line-height:1;
        box-shadow: none;
      }

      /* Ensure expanded item gets more right padding so content doesn't collide with controls */
      .task-item.expanded{
        padding-right:18px;
      }

      /* make sure icons/controls inside the cell don't force overflow */
      .task-info{ min-width:0; }

      /* reduce any timer large font on collapsed state as well */
      .timer-display.expanded{ font-size:13px; }
    }
  </style>
</head>
<body>
  <!-- Copy Entire Code button -->
  <button class="copy-all" aria-label="Copy entire code" title="Copy entire code">
    <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
      <rect x="9" y="9" width="13" height="13" rx="2" stroke="currentColor"></rect>
      <rect x="2" y="2" width="13" height="13" rx="2" stroke="currentColor"></rect>
    </svg>
  </button>

  <div class="container">
    <!-- Hero -->
    <div class="hero-section">
      <h1>🚀 Free Timeboxing App — Time Blocking & Focus Timer</h1>
      <p class="subtitle">Plan focused blocks, track sessions, and reach deep work with a free, open-source timer built for makers, students, and teams.</p>
      <div class="hero-stats">
        <div class="stat-item">✅ Free & Open Source</div>
        <div class="stat-item">📱 iPhone & Android</div>
        <div class="stat-item">💻 Desktop Friendly</div>
        <div class="stat-item">🔒 Privacy-first - No Sign-up</div>
      </div>
    </div>

    <!-- App Interface -->
    <div class="card">
      <div class="tabs">
        <div class="tab active" onclick="switchTab('manual', event)">Add Task</div>
        <div class="tab" onclick="switchTab('bulk', event)">Paste List</div>
        <div class="tab" onclick="switchTab('json', event)">JSON Import</div>
      </div>

      <!-- Manual -->
      <div id="manual" class="tab-content" style="display:block">
        <div class="input-section">
          <div class="input-group">
            <label for="taskName">Task Name</label>
            <input type="text" id="taskName" placeholder="Write task…">
          </div>
          <div class="input-group">
            <label for="taskTime">Minutes</label>
            <input type="number" id="taskTime" min="1" placeholder="e.g. 25">
          </div>
          <button onclick="addTask()">Add Task</button>
        </div>
      </div>

      <!-- Bulk -->
      <div id="bulk" class="tab-content" style="display:none">
        <label for="bulkInput">Paste one task per line</label>
        <div class="example">Email review - 15<br>Project meeting 30<br>Code review – 45</div>
        <textarea id="bulkInput" rows="8" style="min-height: 180px; width: 100%;" placeholder="Email review - 15
Project meeting 30
Code review – 45"></textarea>
        <div style="margin-top:8px"><button class="btn-line" onclick="parseBulkTasks()">Add Tasks</button></div>
      </div>

      <!-- JSON -->
      <div id="json" class="tab-content" style="display:none">
        <h3>📄 JSON Import using AI</h3>
        <p>How to import task lists from AI tools like ChatGPT or Gemini:</p>
        <ol style="margin:8px 0 12px;padding-left:20px">
          <li>Open any AI tool (ChatGPT, Gemini, Claude, etc)</li>
          <li>Copy the prompt below and paste it into the AI</li>
          <li>When AI returns results, copy only the JSON array — from first [ to final ]</li>
          <li>Paste that JSON into the box below and click Import Tasks</li>
        </ol>
        <div class="example" style="margin-bottom:12px">Copy and paste this prompt in any AI tool:<br><br>
          <strong>Generate a JSON array of tasks for my day. Each item must be an object with exactly two fields: "name" (short task title, no newlines) and "duration" (integer minutes between 5 and 240). Output only valid JSON — no explanation, no markdown, no extra text. Return 6–10 tasks. Example: {"name":"Email review","duration":15}.</strong>
        </div>
        <label for="jsonInput">Paste AI JSON here:</label>
        <textarea id="jsonInput" rows="6" style="min-height: 180px; width: 100%;" placeholder='[
  {
    "name": "Email review",
    "duration": 15
  },
  {
    "name": "Project meeting", 
    "duration": 30
  },
  {
    "name": "Code review",
    "duration": 45
  }
]'></textarea>
        <div style="margin-top:8px"><button class="btn-line" onclick="parseJsonTasks()">Import Tasks</button></div>
      </div>
    </div>

    <!-- Timer Controls -->
    <div class="card">
      <div class="controls-grid">
        <button onclick="startTimer()" id="startBtn">▶ Start</button>
        <button onclick="pauseTimer()" id="pauseBtn" class="btn-info">⏸ Pause</button>
        <button onclick="stopTimer()" id="stopBtn" class="btn-danger">⏹ Stop</button>
        <button onclick="skipTask()" id="skipBtn" class="btn-warning">⏭ Next</button>
        <button onclick="previousTask()" id="prevBtn" class="btn-line">⏮ Prev</button>
      </div>
      <div class="time-adjustments">
        <button onclick="removeOneMinute()" id="removeMinBtn" class="btn-line">−1m</button>
        <button onclick="addOneMinute()" id="addMinBtn" class="btn-line">+1m</button>
        <button onclick="removeFiveMinutes()" id="removeFiveMinBtn" class="btn-line">−5m</button>
        <button onclick="addFiveMinutes()" id="addFiveMinBtn" class="btn-line">+5m</button>
      </div>
    </div>

    <!-- Task Queue -->
    <div class="card">
      <h3 style="margin:0 0 6px">⚡ Task Queue</h3>
      <div class="progress-bar"><div class="progress" id="overallProgress" style="width:0%"></div></div>
      <div id="taskList" class="task-list">
        <p style="text-align:center;color:#6b7280;font-style:italic;padding:10px">Add a task to get moving.</p>
      </div>
      <div style="display:flex;justify-content:flex-end;margin-top:6px">
        <button onclick="clearAllTasks()" class="btn-danger">Clear All</button>
      </div>
    </div>

    <!-- Personal Brand & About -->
    <!-- Personal Brand Sections -->
    <div class="personal-brand" style="margin-top:20px; color: #fff; padding: 16px; background: rgba(255,255,255,.12); border: 1px solid rgba(255,255,255,.22); border-radius: 16px;">
      <h3 style="color: #fff; margin-top: 0;">Read Below to Know What This Tool Is All About</h3>
      <p style="margin:8px 0; color: rgba(255,255,255,.9);">This free timeboxing app helps you plan focused blocks, track sessions, and reach deep work. It's built for makers, students, and teams who want to work smarter, not harder.</p>
    </div>

    <div class="personal-brand" style="margin-top:20px; color: #fff; padding: 16px; background: rgba(255,255,255,.12); border: 1px solid rgba(255,255,255,.22); border-radius: 16px;">
      <h4 style="color: #fff; margin-top: 0;">Created by Ashish Puri</h4>
      <p style="margin:8px 0; color: rgba(255,255,255,.9);">I build simple, free tools that help you stop procrastinating and start finishing. This timer is about turning intent into action — today, not "someday." Add your tasks and get after it.</p>
      <div class="social-links">
        <a href="https://www.instagram.com/_ashish_puri/" target="_blank" style="color: #fff; text-decoration: none; font-size: 14px; background: rgba(255,255,255,.16); padding: 8px 12px; border-radius: 999px;">📱 Instagram</a>
        <a href="https://x.com/_ashish_puri" target="_blank" style="color: #fff; text-decoration: none; font-size: 14px; background: rgba(255,255,255,.16); padding: 8px 12px; border-radius: 999px;">🐦 X</a>
        <a href="https://t.me/ashish_puri" target="_blank" style="color: #fff; text-decoration: none; font-size: 14px; background: rgba(255,255,255,.16); padding: 8px 12px; border-radius: 999px;">💬 Telegram</a>
        <a href="https://www.facebook.com/ashishpurii" target="_blank" style="color: #fff; text-decoration: none; font-size: 14px; background: rgba(255,255,255,.16); padding: 8px 12px; border-radius: 999px;">📘 Facebook</a>
        <a href="https://www.twitch.tv/ashish_purii" target="_blank" style="color: #fff; text-decoration: none; font-size: 14px; background: rgba(255,255,255,.16); padding: 8px 12px; border-radius: 999px;">🎮 Twitch</a>
        <a href="https://github.com/ashish-purii" target="_blank" style="color: #fff; text-decoration: none; font-size: 14px; background: rgba(255,255,255,.16); padding: 8px 12px; border-radius: 999px;">💻 GitHub</a>
      </div>
    </div>

    <div class="personal-brand" style="margin-top:20px; color: #fff; padding: 16px; background: rgba(255,255,255,.12); border: 1px solid rgba(255,255,255,.22); border-radius: 16px;">
      <h4 style="color: #fff; margin-top: 0;">If this helps you win — consider supporting</h4>
      <p style="margin:8px 0; color: rgba(255,255,255,.9);">I'm on your side. If this timer helps you become the stronger, sharper version of yourself, fuel the mission. Any amount keeps the lights on and the tools coming.</p>
      <div class="donation-block" aria-label="Donations" style="display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:center; margin-top:8px;">
        <a href="upi://pay?pa=ashishthevisionary@ybl&pn=Ashish%20&tn=Any%20amount&cu=INR" target="_blank" rel="noopener noreferrer" title="Open UPI app to donate">
          <img src="https://res.cloudinary.com/ddzfmdjaj/image/upload/v1754922021/New_Project_13_jwc3ua.png" alt="UPI QR / Donate QR" style="width:144px; height:144px; object-fit:contain; background:#fff; border-radius:10px; border:1px solid rgba(0,0,0,.06); padding:6px">
        </a>
        <div class="donation-links" role="group" aria-label="Donation links" style="display:flex; flex-direction:column; gap:8px; align-items:center;">
          <a href="upi://pay?pa=ashishthevisionary@ybl&pn=Ashish%20&tn=Any%20amount&cu=INR" class="donate-link" title="Donate via UPI (open on mobile)" style="background:linear-gradient(135deg,#f59e0b,#ef4444)!important; color:#fff!important; padding:10px 16px!important; border-radius:999px!important; font-weight:800!important; text-decoration:none">Donate Now (UPI)</a>
          <a href="https://buymeacoffee.com/ashishpuri" class="small" target="_blank" rel="noopener noreferrer" style="background:#fff; color:#111827; border:1px solid #e5e7eb; border-radius:10px; padding:8px 12px; text-decoration:none; font-weight:700; font-size:14px">Buy Me a Coffee</a>
          <a href="https://razorpay.me/@ashishthevisionary" class="small" target="_blank" rel="noopener noreferrer" style="background:#fff; color:#111827; border:1px solid #e5e7eb; border-radius:10px; padding:8px 12px; text-decoration:none; font-weight:700; font-size:14px">Razorpay</a>
          <a href="https://www.patreon.com/c/ashishpuri/" class="small" target="_blank" rel="noopener noreferrer" style="background:#fff; color:#111827; border:1px solid #e5e7eb; border-radius:10px; padding:8px 12px; text-decoration:none; font-weight:700; font-size:14px">Patreon</a>
        </div>
      </div>
    </div>

    <!-- Motivational Intro -->
    <section class="content" id="intro-timeboxing">
      <h2>What Is Timeboxing?</h2>
      <p>Imagine a surgeon in the operating room. Every second counts. Every move is deliberate. There's no room for drift, no "I'll get to it later." That's how the world's most productive leaders treat their day. They don't just work — they operate with surgical precision.</p>
      <p>This is timeboxing: the art of giving every task a defined window, every minute a mission. It's not about working longer — it's about working sharper.</p>
      <p>Think of Elon Musk juggling rockets, cars, AI, and infrastructure. He doesn't let tasks sprawl aimlessly. He locks them into focused blocks, protects those blocks like a fortress, and executes with intensity until the clock runs out. That's why his output looks superhuman — it's built on discipline, not chaos.</p>
      <h3>Why Top Performers Use This Method</h3>
      <ul>
        <li><strong>Parkinson's Law mastery</strong> — Work expands to fill the time you give it. Timeboxing starves waste and forces speed.</li>
        <li><strong>Decision fatigue elimination</strong> — You pre-decide when and for how long, removing daily choice paralysis.</li>
        <li><strong>Progress visibility</strong> — You see your wins stack up block by block, building momentum like a snowball.</li>
        <li><strong>Deep work activation</strong> — One task. One block. Zero distractions.</li>
      </ul>
      <h3>Three Ways to Load Your Tasks and actually use it</h3>
      <ul>
        <li><strong>Manual entry</strong> — Add tasks individually with precise time allocations when you want tight control.</li>
        <li><strong>Bulk paste</strong> — Paste one task per line or separate tasks with a dash. Put minutes after each dash (e.g. Write intro - 20), then click "Add Tasks." Fast and practical for quick planning.</li>
        <li><strong>JSON import</strong> — Use any AI planner to produce a ready-to-import JSON array. See the JSON tab for a simple prompt and copy/paste instructions so even non-technical users can import task lists instantly.</li>
      </ul>
      <h3>The Mindset Shift</h3>
      <p>Timeboxing isn't just a productivity tool — it's a training ground for mental toughness. When you learn to finish inside the walls of a time block, you train the same self-control elite performers rely on in high-stakes situations. You'll move faster, make cleaner decisions, and feel in control of your time again.</p>
    </section>


    <!-- Warning Popup -->
    <div id="warningPopup" class="warning-popup" role="dialog" aria-live="assertive">
      <h3>⚠ Task almost complete</h3>
      <p>Only <span id="warningTime">20</span> seconds left</p>
      <div class="warning-controls">
        <button onclick="addOneMinute()" class="btn-success">+1m</button>
        <input type="number" id="customTime" class="time-input" placeholder="Custom m" min="1">
        <button onclick="addCustomTime()" class="btn-info">Add</button>
        <button onclick="dismissWarning()" class="btn-line">Hide</button>
      </div>
      <div style="margin-top:8px;display:flex;gap:8px">
        <button onclick="skipTask()" class="btn-warning" style="flex:1">Next Task</button>
        <button onclick="stopTimer()" class="btn-danger" style="flex:1">Stop</button>
      </div>
    </div>

  </div>

  <!-- Combined Creator and Donation Section -->
  <div class="personal-brand" style="margin-top:20px; color: #fff; padding: 16px; background: rgba(255,255,255,.12); border: 1px solid rgba(255,255,255,.22); border-radius: 16px;">
    <h3 style="color: #fff; margin-top: 0;">Created by Ashish Puri</h3>
    <p style="margin:8px 0; color: rgba(255,255,255,.9);">I build simple, free tools that help you stop procrastinating and start finishing. This timer is about turning intent into action — today, not "someday." Add your tasks and get after it.</p>
    
    <div class="social-links">
      <a href="https://www.instagram.com/_ashish_puri/" target="_blank">📱 Instagram</a>
      <a href="https://x.com/_ashish_puri" target="_blank">🐦 X</a>
      <a href="https://t.me/ashish_puri" target="_blank">💬 Telegram</a>
      <a href="https://www.facebook.com/ashishpurii" target="_blank">📘 Facebook</a>
      <a href="https://www.twitch.tv/ashish_purii" target="_blank">🎮 Twitch</a>
      <a href="https://github.com/ashish-purii" target="_blank">💻 GitHub</a>
    </div>

    <h4 style="color: #fff; margin: 16px 0 0;">If this helps you win — consider supporting</h4>
    <p style="margin:8px 0; color: rgba(255,255,255,.9);">I'm on your side. If this timer helps you become the stronger, sharper version of yourself, fuel the mission. Any amount keeps the lights on and the tools coming.</p>
    
    <div class="donation-block" aria-label="Donations" style="display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:center; margin-top:8px;">
      <a href="upi://pay?pa=ashishthevisionary@ybl&pn=Ashish%20&tn=Any%20amount&cu=INR" target="_blank" rel="noopener noreferrer" title="Open UPI app to donate">
        <img src="https://res.cloudinary.com/ddzfmdjaj/image/upload/v1754922021/New_Project_13_jwc3ua.png" alt="UPI QR / Donate QR" style="width:144px; height:144px; object-fit:contain; background:#fff; border-radius:10px; border:1px solid rgba(0,0,0,.06); padding:6px">
      </a>
      <div class="donation-links" role="group" aria-label="Donation links" style="display:flex; flex-direction:column; gap:8px; align-items:center;">
        <a href="upi://pay?pa=ashishthevisionary@ybl&pn=Ashish%20&tn=Any%20amount&cu=INR" class="donate-link" title="Donate via UPI (open on mobile)" style="background:linear-gradient(135deg,#f59e0b,#ef4444)!important; color:#fff!important; padding:10px 16px!important; border-radius:999px!important; font-weight:800!important; text-decoration:none">Donate Now (UPI)</a>
        <a href="https://buymeacoffee.com/ashishpuri" class="small" target="_blank" rel="noopener noreferrer" style="background:#fff; color:#111827; border:1px solid #e5e7eb; border-radius:10px; padding:8px 12px; text-decoration:none; font-weight:700; font-size:14px">Buy Me a Coffee</a>
        <a href="https://razorpay.me/@ashishthevisionary" class="small" target="_blank" rel="noopener noreferrer" style="background:#fff; color:#111827; border:1px solid #e5e7eb; border-radius:10px; padding:8px 12px; text-decoration:none; font-weight:700; font-size:14px">Razorpay</a>
        <a href="https://www.patreon.com/c/ashishpuri/" class="small" target="_blank" rel="noopener noreferrer" style="background:#fff; color:#111827; border:1px solid #e5e7eb; border-radius:10px; padding:8px 12px; text-decoration:none; font-weight:700; font-size:14px">Patreon</a>
      </div>
    </div>
  </div>

  <script>
    // One-click: copy entire HTML document
    document.querySelector('.copy-all').addEventListener('click', async () => {
      try{
        const html = '<!DOCTYPE html>\n' + document.documentElement.outerHTML;
        if(navigator.clipboard && window.isSecureContext){
          await navigator.clipboard.writeText(html);
        }else{
          const ta = document.createElement('textarea');
          ta.value = html;
          document.body.appendChild(ta);
          ta.select();
          ta.setSelectionRange(0, html.length);
          document.execCommand('copy');
          ta.remove();
        }
        const btn = document.querySelector('.copy-all');
        const original = btn.innerHTML;
        btn.innerHTML = '✓';
        setTimeout(()=>btn.innerHTML = original, 1000);
      }catch(e){
        alert('Copy failed. Long-press/select all as fallback.');
      }
    });

    // App state
    let tasks = [];
    let currentTaskIndex = 0;
    let timer = null;
    let timeRemaining = 0;
    let isPaused = false;
    let totalTime = 0;
    let elapsedTime = 0;
    let warningShown = false;
    let expandedTaskIndex = -1;

    // Click outside handler
    document.addEventListener('click', (e) => {
      const clickedTask = e.target.closest('.task-item');
      if (!clickedTask && expandedTaskIndex !== -1) {
        expandedTaskIndex = -1;
        updateTaskDisplay();
      }
    });

    // Tabs
    function switchTab(tabName, evt){
      document.querySelectorAll('.tab-content').forEach(c=>c.style.display='none');
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      const el = document.getElementById(tabName);
      if(el) el.style.display='block';
      if(evt) evt.target.classList.add('active');
    }

    function sanitize(str){return String(str).replace(/</g,'&lt;')}

    function formatTime(sec){
      sec = Math.max(0, Math.floor(sec));
      if(sec>=3600){
        const h = Math.floor(sec/3600);
        const m = Math.floor((sec%3600)/60).toString().padStart(2,'0');
        const s = (sec%60).toString().padStart(2,'0');
        return `${h}:${m}:${s}`;
      }else{
        const m = Math.floor(sec/60);
        const s = (sec%60).toString().padStart(2,'0');
        return `${m}:${s}`;
      }
    }

    // Task expansion
    function toggleTaskExpansion(index, event) {
      event.stopPropagation();
      expandedTaskIndex = expandedTaskIndex === index ? -1 : index;
      updateTaskDisplay();
    }

    // Adders
    function addTask(){
      const name = document.getElementById('taskName').value.trim();
      const minutes = parseInt(document.getElementById('taskTime').value,10);
      if(!name || !minutes || minutes<=0){ alert('Enter a task and minutes > 0'); return; }
      tasks.unshift({ name, duration: minutes*60, completed:false });
      document.getElementById('taskName').value='';
      document.getElementById('taskTime').value='';
      currentTaskIndex = 0;
      timeRemaining = tasks[currentTaskIndex].duration;
      recalcAndRender();
    }

    function parseBulkTasks(){
      const bulkText = document.getElementById('bulkInput').value.trim();
      if(!bulkText) return;
      const lines = bulkText.split('\n');
      let added = 0;
      lines.forEach(line=>{
        const trimmed = line.trim();
        if(!trimmed) return;
        
        // Try both formats: "Task - 25" and "Task 25"
        const m = trimmed.match(/^(.+?)\s*[-–]\s*(\d+)$/) || trimmed.match(/^(.+?)\s+(\d+)$/);
        if(m){
          const name = m[1].trim();
          const minutes = parseInt(m[2],10);
          if(name && minutes>0){
            tasks.push({ name, duration: minutes*60, completed:false });
            added++;
          }
        }
      });
      document.getElementById('bulkInput').value='';
      recalcAndRender();
      alert(added>0 ? `Successfully added ${added} tasks!` : 'No valid tasks found. Use format like "Task - 25" or "Task 25"');
    }

    function parseJsonTasks(){
      const jsonText = document.getElementById('jsonInput').value.trim();
      if(!jsonText) return;
      try{
        const jsonTasks = JSON.parse(jsonText);
        let added = 0;
        if(Array.isArray(jsonTasks)){
          jsonTasks.forEach(t=>{
            const dur = Number(t.duration);
            if(t && t.name && Number.isFinite(dur) && dur>0){
              tasks.push({ name: String(t.name), duration: Math.floor(dur)*60, completed:false });
              added++;
            }
          });
        }
        document.getElementById('jsonInput').value='';
        recalcAndRender();
        alert(added>0 ? `Successfully imported ${added} tasks!` : 'No valid tasks in JSON.');
      }catch(e){ alert('Invalid JSON format.'); }
    }

    // Progress
    function calculateTotalTime(){
      totalTime = tasks.reduce((s,t)=>s+t.duration,0);
      elapsedTime = 0;
      for(let i=0;i<tasks.length;i++){
        if(tasks[i]?.completed) elapsedTime += tasks[i].duration;
      }
    }

    function updateProgress(){
      const currentElapsed = (tasks[currentTaskIndex] ? (tasks[currentTaskIndex].duration - timeRemaining) : 0);
      const percent = totalTime>0 ? ((elapsedTime + Math.max(0,currentElapsed)) / totalTime) * 100 : 0;
      document.getElementById('overallProgress').style.width = `${Math.min(100, Math.max(0, percent))}%`;
    }

    // Rendering
    function updateTaskDisplay(){
      const list = document.getElementById('taskList');
      if(tasks.length===0){
        list.innerHTML = '<p style="text-align:center;color:#6b7280;font-style:italic;padding:10px">Add a task to get moving.</p>';
        return;
      }
      list.innerHTML = tasks.map((task, i)=>{
        const isActive = i===currentTaskIndex;
        const isExpanded = i===expandedTaskIndex;
        let cls = '';
        let icon = '⏹';
        let display = formatTime(task.duration);
        if(isActive){
          cls = timer ? 'active' : (isPaused ? 'paused' : 'active');
          icon = timer ? '▶' : (isPaused ? '⏸' : '⏹');
          if(timeRemaining>0){ display = formatTime(timeRemaining); }
        }
        if(task.completed){ cls += ' completed'; }
        if(isExpanded){ cls += ' expanded'; }
        
        const taskNameClass = isExpanded ? 'task-name expanded' : 'task-name';
        const timerDisplayClass = isExpanded ? 'timer-display expanded' : 'timer-display';
        
        return `
          <div class="task-item ${cls}" onclick="toggleTaskExpansion(${i}, event)">
            <div class="move-controls">
              <button class="move-btn" onclick="event.stopPropagation(); moveTask(${i},-1)" ${i===0?'disabled':''}>▲</button>
              <button class="move-btn" onclick="event.stopPropagation(); moveTask(${i},1)" ${i===tasks.length-1?'disabled':''}>▼</button>
            </div>
            <div class="task-info">
              <div class="${taskNameClass}" title="${sanitize(task.name)}">${sanitize(task.name)}</div>
              <div class="task-time">Duration: ${formatTime(task.duration)}</div>
            </div>
            <div class="${timerDisplayClass}">${icon} ${display}</div>
            <div class="task-controls">
              <button class="btn-danger" onclick="event.stopPropagation(); removeTask(${i})">Remove</button>
            </div>
          </div>
        `;
      }).join('');
    }

    function recalcAndRender(){
      if(currentTaskIndex>=tasks.length){ currentTaskIndex = Math.max(0, tasks.length-1); }
      if(tasks.length && !timeRemaining){ timeRemaining = tasks[currentTaskIndex].duration; }
      calculateTotalTime();
      updateTaskDisplay();
      updateProgress();
    }

    // Controls
    function startTimer(){
      if(tasks.length===0){ alert('Add some tasks first!'); return; }
      if(currentTaskIndex>=tasks.length){ currentTaskIndex=0; tasks.forEach(t=>t.completed=false); elapsedTime=0; }
      if(!timeRemaining) timeRemaining = tasks[currentTaskIndex].duration;
      if(timer) return;
      isPaused=false; warningShown=false;
      timer = setInterval(()=>{
        if(timeRemaining>0){
          timeRemaining--;
          if(timeRemaining===20 && !warningShown){ showWarning(); warningShown=true; }
          updateTaskDisplay();
          updateProgress();
        } else {
          clearInterval(timer); timer=null; completeCurrentTask();
        }
      },1000);
      updateTaskDisplay();
    }

    function pauseTimer(){ if(timer){ clearInterval(timer); timer=null; isPaused=true; updateTaskDisplay(); } }

    function stopTimer(){
      if(timer){ clearInterval(timer); timer=null; }
      isPaused=false; warningShown=false; dismissWarning();
      if(currentTaskIndex<tasks.length){ timeRemaining = tasks[currentTaskIndex].duration; } else { timeRemaining=0; }
      updateTaskDisplay();
    }

    function skipTask(){
      if(currentTaskIndex>=tasks.length){ alert('No more tasks!'); return; }
      if(timer){ clearInterval(timer); timer=null; }
      tasks[currentTaskIndex].completed = true;
      elapsedTime += tasks[currentTaskIndex].duration;
      currentTaskIndex++;
      warningShown=false; dismissWarning();
      if(currentTaskIndex<tasks.length){ timeRemaining = tasks[currentTaskIndex].duration; setTimeout(()=>startTimer(), 350); } else { timeRemaining=0; }
      calculateTotalTime();
      updateTaskDisplay();
    }

    function previousTask(){
      if(currentTaskIndex<=0){ alert('Already at the first task!'); return; }
      if(timer){ clearInterval(timer); timer=null; }
      currentTaskIndex--; tasks[currentTaskIndex].completed=false;
      timeRemaining = tasks[currentTaskIndex].duration;
      warningShown=false; dismissWarning(); isPaused=false;
      setTimeout(()=>startTimer(), 350);
      calculateTotalTime(); updateTaskDisplay();
    }

    // Task ops
    function moveTask(index, dir){
      const newIndex = index + dir;
      if(newIndex>=0 && newIndex<tasks.length){
        [tasks[index], tasks[newIndex]] = [tasks[newIndex], tasks[index]];
        if(currentTaskIndex===index){ currentTaskIndex=newIndex; }
        else if(currentTaskIndex===newIndex){ currentTaskIndex=index; }
        updateTaskDisplay();
      }
    }

    function removeTask(index){
      if(index===currentTaskIndex && timer){ stopTimer(); }
      tasks.splice(index,1);
      if(currentTaskIndex>=tasks.length){ currentTaskIndex=Math.max(0,tasks.length-1); }
      if(tasks.length===0){ timeRemaining=0; }
      if(expandedTaskIndex===index){ expandedTaskIndex=-1; }
      else if(expandedTaskIndex>index){ expandedTaskIndex--; }
      recalcAndRender();
    }

    function clearAllTasks(){
      if(tasks.length===0){ alert('No tasks to remove.'); return; }
      if(confirm('Remove all tasks?')){
        if(timer){ clearInterval(timer); timer=null; }
        tasks.length=0; currentTaskIndex=0; timeRemaining=0; totalTime=0; elapsedTime=0; isPaused=false; warningShown=false; expandedTaskIndex=-1; dismissWarning();
        updateTaskDisplay(); updateProgress();
      }
    }

    // Time tweaks
    function addOneMinute(){ adjustCurrent(60) }
    function removeOneMinute(){ adjustCurrent(-60) }
    function addFiveMinutes(){ adjustCurrent(300) }
    function removeFiveMinutes(){ adjustCurrent(-300) }

    function adjustCurrent(delta){
      if(currentTaskIndex>=tasks.length) return;
      const t = tasks[currentTaskIndex];
      const newDur = Math.max(60, t.duration + delta);
      const diff = newDur - t.duration;
      t.duration = newDur;
      timeRemaining = Math.max(0, timeRemaining + diff);
      totalTime = Math.max(0, totalTime + diff);
      warningShown=false; dismissWarning();
      updateTaskDisplay(); updateProgress();
    }

    function addCustomTime(){
      const custom = parseInt(document.getElementById('customTime').value,10);
      if(custom && custom>0 && currentTaskIndex<tasks.length){
        const add = custom*60;
        tasks[currentTaskIndex].duration += add;
        timeRemaining += add;
        totalTime += add;
        warningShown=false; dismissWarning();
        document.getElementById('customTime').value='';
        updateTaskDisplay(); updateProgress();
      }
    }

    // Warning
    function showWarning(){
      const wt = Math.max(0, timeRemaining);
      document.getElementById('warningTime').textContent = wt;
      document.getElementById('warningPopup').style.display='block';
    }
    function dismissWarning(){ document.getElementById('warningPopup').style.display='none'; }

    function completeCurrentTask(){ skipTask(); }

    // Init
    updateTaskDisplay();
  </script>
</body>
</html>
